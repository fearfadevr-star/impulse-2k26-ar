<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>IMPULSE 2k26 | AR Invitation</title>
  <!-- A-Frame & AR.js -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;600;700&family=Audiowide&family=Russo+One&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(135deg, #000000 0%, #0f0f23 50%, #1a0a2e 100%);
      font-family: 'Rajdhani', sans-serif;
      width: 100vw;
      height: 100vh;
      position: fixed;
      touch-action: none;
    }
    
    /* Animated background with stars */
    .bg-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      pointer-events: none;
      background: 
        radial-gradient(2px 2px at 20% 30%, white, transparent),
        radial-gradient(2px 2px at 60% 70%, white, transparent),
        radial-gradient(1px 1px at 50% 50%, white, transparent),
        radial-gradient(1px 1px at 80% 10%, white, transparent),
        radial-gradient(2px 2px at 90% 60%, white, transparent),
        radial-gradient(1px 1px at 15% 80%, white, transparent),
        radial-gradient(2px 2px at 40% 20%, white, transparent),
        radial-gradient(circle at 20% 50%, rgba(255, 204, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(0, 234, 255, 0.15) 0%, transparent 50%);
      background-size: 200% 200%;
      animation: stars 3s ease-in-out infinite;
    }
    
    @keyframes stars {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }
    
    /* Top banner with glow */
    .top-banner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, transparent 100%);
      padding: 20px 15px;
      z-index: 10;
      text-align: center;
      border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    }
    
    .logo-text {
      font-family: 'Audiowide', cursive;
      font-size: clamp(14px, 4vw, 18px);
      color: #ffd700;
      letter-spacing: 3px;
      text-shadow: 
        0 0 10px rgba(255, 215, 0, 0.8),
        0 0 20px rgba(255, 215, 0, 0.6),
        0 0 30px rgba(255, 215, 0, 0.4);
      animation: glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes glow {
      from {
        text-shadow: 
          0 0 10px rgba(255, 215, 0, 0.8),
          0 0 20px rgba(255, 215, 0, 0.6),
          0 0 30px rgba(255, 215, 0, 0.4);
      }
      to {
        text-shadow: 
          0 0 20px rgba(255, 215, 0, 1),
          0 0 30px rgba(255, 215, 0, 0.8),
          0 0 40px rgba(255, 215, 0, 0.6);
      }
    }
    
    /* Zoom controls */
    .zoom-controls {
      position: fixed;
      top: 80px;
      right: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 15;
    }
    
    .zoom-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, rgba(0, 234, 255, 0.3), rgba(138, 43, 226, 0.3));
      border: 2px solid rgba(0, 234, 255, 0.6);
      color: #ffffff;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
      box-shadow: 0 0 15px rgba(0, 234, 255, 0.4);
      user-select: none;
      -webkit-user-select: none;
    }
    
    .zoom-btn:active {
      transform: scale(0.9);
      background: linear-gradient(135deg, rgba(0, 234, 255, 0.5), rgba(138, 43, 226, 0.5));
    }
    
    .zoom-reset {
      font-size: 14px;
      padding: 8px;
      height: auto;
      border-radius: 25px;
      font-family: 'Rajdhani', sans-serif;
      letter-spacing: 1px;
    }
    
    /* Bottom controls */
    .controls {
      position: fixed;
      bottom: 20px;
      left: 0;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      z-index: 10;
      padding: 0 15px;
    }
    
    .nav-buttons {
      display: flex;
      gap: 15px;
      align-items: center;
    }
    
    .day-label {
      font-family: 'Russo One', sans-serif;
      color: #ffffff;
      font-size: clamp(16px, 4vw, 18px);
      letter-spacing: 2px;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
      min-width: 90px;
      text-align: center;
    }
    
    .btn {
      padding: 14px 28px;
      border-radius: 50px;
      font-weight: 700;
      font-size: clamp(14px, 3vw, 16px);
      border: none;
      cursor: pointer;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Rajdhani', sans-serif;
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      user-select: none;
      -webkit-user-select: none;
    }
    
    .btn-prev, .btn-next {
      background: linear-gradient(135deg, rgba(0, 234, 255, 0.2), rgba(138, 43, 226, 0.2));
      color: #ffffff;
      backdrop-filter: blur(15px);
      border: 2px solid rgba(0, 234, 255, 0.5);
      width: 60px;
      height: 60px;
      padding: 0;
      justify-content: center;
      font-size: 20px;
      box-shadow: 
        0 0 20px rgba(0, 234, 255, 0.3),
        inset 0 0 20px rgba(0, 234, 255, 0.1);
    }
    
    .btn-prev:hover, .btn-next:hover {
      background: linear-gradient(135deg, rgba(0, 234, 255, 0.4), rgba(138, 43, 226, 0.4));
      border-color: rgba(0, 234, 255, 0.8);
      transform: scale(1.15) rotate(5deg);
      box-shadow: 
        0 10px 40px rgba(0, 234, 255, 0.5),
        inset 0 0 30px rgba(0, 234, 255, 0.2);
    }
    
    .btn-prev:active, .btn-next:active {
      transform: scale(0.95);
    }
    
    .btn-register {
      background: linear-gradient(135deg, #ffcc00 0%, #ff6b00 50%, #ff0080 100%);
      color: #000;
      font-family: 'Russo One', sans-serif;
      font-size: clamp(16px, 4vw, 18px);
      padding: 16px 35px;
      box-shadow: 
        0 10px 40px rgba(255, 204, 0, 0.5),
        0 0 30px rgba(255, 107, 0, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .btn-register:before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
      transition: left 0.6s;
    }
    
    .btn-register:hover:before {
      left: 100%;
    }
    
    .btn-register:hover {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 
        0 15px 50px rgba(255, 204, 0, 0.7),
        0 0 40px rgba(255, 107, 0, 0.5);
    }
    
    /* Day indicator */
    .day-indicator {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      transition: all 0.4s;
      position: relative;
    }
    
    .dot.active {
      background: #ffcc00;
      border-color: #ffcc00;
      box-shadow: 
        0 0 20px rgba(255, 204, 0, 0.9),
        0 0 40px rgba(255, 204, 0, 0.5);
      transform: scale(1.4);
    }
    
    .dot.active:after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 204, 0, 0.4);
      border-radius: 50%;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(2);
        opacity: 0;
      }
    }
    
    /* Loading overlay */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #000000 0%, #1a0a2e 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.5s;
    }
    
    .loading.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255, 204, 0, 0.2);
      border-top-color: #ffcc00;
      border-right-color: #00eaff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      box-shadow: 0 0 30px rgba(255, 204, 0, 0.5);
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      margin-top: 25px;
      color: #ffffff;
      font-size: clamp(14px, 4vw, 18px);
      letter-spacing: 4px;
      font-family: 'Orbitron', sans-serif;
      text-transform: uppercase;
      animation: fadeInOut 2s ease-in-out infinite;
      text-align: center;
      padding: 0 20px;
    }
    
    @keyframes fadeInOut {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    
    /* Compatibility message */
    .compatibility-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      z-index: 1001;
      max-width: 90%;
      border: 2px solid #ffd700;
      display: none;
    }
    
    .compatibility-message.show {
      display: block;
    }
    
    /* Hide A-Frame default loading screen and debug UI */
    .a-loader-title,
    .a-canvas .a-loader-title,
    .a-enter-vr,
    .a-enter-ar,
    #arjsDebugUIContainer,
    [id^="arjs"],
    .arjs-loader {
      display: none !important;
      opacity: 0 !important;
      visibility: hidden !important;
      pointer-events: none !important;
    }
    
    /* Ensure our loading screen is visible */
    .loading {
      display: flex !important;
    }
    
    /* AR Scene container */
    a-scene {
      width: 100vw !important;
      height: 100vh !important;
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
    }
  </style>
</head>
<body>
<!-- Background particles -->
<div class="bg-particles"></div>

<!-- Loading screen -->
<div class="loading" id="loading">
  <div class="spinner"></div>
  <div class="loading-text">Initializing AR Experience...</div>
</div>

<!-- Compatibility message (hidden by default) -->
<div class="compatibility-message" id="compatibilityMessage">
  <h3>‚ö†Ô∏è AR Compatibility Check</h3>
  <p id="compatibilityText">Checking device compatibility...</p>
  <button onclick="retryAR()" style="margin-top: 15px; padding: 10px 20px; background: #ffd700; border: none; border-radius: 25px; font-weight: bold; cursor: pointer;">
    Retry AR
  </button>
</div>

<!-- Top banner -->
<div class="top-banner">
  <div class="logo-text">‚ö° IMPULSE 2K26 ‚ö°</div>
</div>

<!-- Zoom Controls -->
<div class="zoom-controls">
  <button class="zoom-btn" onclick="zoomIn()" aria-label="Zoom in">+</button>
  <button class="zoom-btn zoom-reset" onclick="resetZoom()" aria-label="Reset zoom">RESET</button>
  <button class="zoom-btn" onclick="zoomOut()" aria-label="Zoom out">‚àí</button>
</div>

<!-- CONTROLS -->
<div class="controls">
  <div class="day-indicator" id="dayIndicator">
    <div class="dot active"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
  <div class="nav-buttons">
    <button class="btn btn-prev" onclick="prevDay()" aria-label="Previous day">‚óÑ</button>
    <div class="day-label" id="dayLabel">DAY 1/5</div>
    <button class="btn btn-next" onclick="nextDay()" aria-label="Next day">‚ñ∫</button>
  </div>
  <a class="btn btn-register"
     href="https://forms.gle/txntsUbPfT5LPbjJ9"
     target="_blank"
     rel="noopener noreferrer">
    üéØ REGISTER NOW
  </a>
</div>

<!-- AR Scene -->
<a-scene 
  embedded 
  arjs="sourceType: webcam; 
        debugUIEnabled: false; 
        detectionMode: mono_and_matrix; 
        matrixCodeType: 3x3;
        cameraParametersUrl: https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/data/camera_para.dat;
        sourceWidth: 1280;
        sourceHeight: 720;
        displayWidth: 1280;
        displayHeight: 720;"
  vr-mode-ui="enabled: false"
  loading-screen="enabled: false"
  renderer="antialias: true; 
           colorManagement: true; 
           physicallyCorrectLights: true;
           precision: medium;
           logarithmicDepthBuffer: false;">
  
  <!-- Camera with zoom control -->
  <a-camera id="arCamera" position="0 0 0" fov="60" wasd-controls-enabled="false" look-controls-enabled="true">
  </a-camera>
  
  <!-- Enhanced lighting setup with multiple colored lights -->
  <a-entity light="type: ambient; color: #666; intensity: 0.7"></a-entity>
  <a-entity light="type: directional; color: #fff; intensity: 0.9" position="-2 3 1"></a-entity>
  <a-entity light="type: point; color: #ffd700; intensity: 0.6" position="0 2.5 -5"
            animation="property: intensity; from: 0.4; to: 0.8; dir: alternate; dur: 2000; loop: true; easing: easeInOutSine"></a-entity>
  <a-entity light="type: point; color: #00eaff; intensity: 0.6" position="0 -0.5 -6"
            animation="property: intensity; from: 0.4; to: 0.8; dir: alternate; dur: 2500; loop: true; easing: easeInOutSine"></a-entity>
  
  <!-- Main AR content container -->
  <a-entity id="arContent" position="0 0 -5">
    
    <!-- Background layers with depth -->
    <a-plane 
      position="0 0.8 0" 
      rotation="0 0 0" 
      width="16" 
      height="10" 
      color="#050510" 
      opacity="0.5"
      shader="flat">
    </a-plane>
    
    <!-- MAIN TITLE -->
    <a-text
      value="IMPULSE"
      position="0 3.2 0"
      align="center"
      color="#ffffff"
      scale="3.5 3.5 3.5"
      letter-spacing="8"
      font="roboto"
      shader="flat">
    </a-text>
    
    <a-text
      value="2K26"
      position="0 2.6 0"
      align="center"
      color="#ffd700"
      scale="2.5 2.5 2.5"
      letter-spacing="15"
      font="roboto"
      shader="flat">
    </a-text>
    
    <!-- Animated decorative rings around title -->
    <a-ring
      position="0 2.9 0"
      radius-inner="2.3"
      radius-outer="2.35"
      color="#ffd700"
      opacity="0.5"
      animation="property: rotation; to: 0 0 360; loop: true; dur: 18000; easing: linear">
    </a-ring>
    
    <!-- DATE -->
    <a-text
      value="10 - 14 FEBRUARY 2026"
      position="0 1.9 0"
      align="center"
      color="#00eaff"
      scale="1.1 1.1 1.1"
      letter-spacing="4">
    </a-text>
    
    <!-- TAGLINE -->
    <a-text
      value="SPORTS | CULTURE | CELEBRATION"
      position="0 1.6 0"
      align="center"
      color="#dddddd"
      scale="0.9 0.9 0.9"
      letter-spacing="2">
    </a-text>
    
    <!-- Middle separator -->
    <a-plane
      position="0 1.35 0"
      width="6.5"
      height="0.025"
      color="#ffd700"
      opacity="0.6">
    </a-plane>
    
    <!-- DAY TITLE -->
    <a-text
      id="dayTitle"
      position="0 1.0 0"
      align="center"
      color="#ffd700"
      scale="1.3 1.3 1.3"
      letter-spacing="3">
    </a-text>
    
    <!-- DAY DATE -->
    <a-text
      id="dayDate"
      position="0 0.7 0"
      align="center"
      color="#ffffff"
      scale="0.95 0.95 0.95"
      letter-spacing="2">
    </a-text>
    
    <!-- DAY CONTENT - Line 1 -->
    <a-text
      id="line1"
      position="0 0.35 0"
      align="center"
      color="#ffffff"
      scale="1.0 1.0 1.0"
      letter-spacing="2">
    </a-text>
    
    <!-- DAY CONTENT - Line 2 -->
    <a-text
      id="line2"
      position="0 0.05 0"
      align="center"
      color="#ffffff"
      scale="1.0 1.0 1.0"
      letter-spacing="2">
    </a-text>
    
    <!-- DAY CONTENT - Line 3 -->
    <a-text
      id="line3"
      position="0 -0.25 0"
      align="center"
      color="#ffffff"
      scale="1.0 1.0 1.0"
      letter-spacing="2">
    </a-text>
    
    <!-- DAY CONTENT - Line 4 -->
    <a-text
      id="line4"
      position="0 -0.55 0"
      align="center"
      color="#ffffff"
      scale="1.0 1.0 1.0"
      letter-spacing="2">
    </a-text>
    
    <!-- FOOTER -->
    <a-text
      value="LAST DATE TO REGISTER"
      position="0 -1.1 0"
      align="center"
      color="#ff6b6b"
      scale="1.0 1.0 1.0"
      letter-spacing="3"
      animation="property: opacity; from: 0.6; to: 1; dir: alternate; dur: 1000; loop: true; easing: easeInOutQuad">
    </a-text>
    
    <a-text
      value="6 FEBRUARY 2026"
      position="0 -1.4 0"
      align="center"
      color="#00eaff"
      scale="1.15 1.15 1.15"
      letter-spacing="4">
    </a-text>
    
    <!-- Simplified decorative elements for better performance -->
    <a-sphere position="-4.5 3.8 0" radius="0.09" color="#ffd700" opacity="0.8"
              animation="property: position; to: -4.5 1.2 0; dir: alternate; dur: 3800; loop: true; easing: easeInOutQuad"></a-sphere>
    <a-sphere position="4.2 1.5 0" radius="0.07" color="#ffd700" opacity="0.7"
              animation="property: position; to: 4.2 3.5 0; dir: alternate; dur: 3500; loop: true; easing: easeInOutQuad"></a-sphere>
    <a-sphere position="-4.3 1.4 0" radius="0.06" color="#00d4ff" opacity="0.7"
              animation="property: position; to: -4.3 3.7 0; dir: alternate; dur: 4100; loop: true; easing: easeInOutQuad"></a-sphere>
    <a-sphere position="4.0 3.9 0" radius="0.08" color="#00eaff" opacity="0.8"
              animation="property: position; to: 4.0 1.1 0; dir: alternate; dur: 3700; loop: true; easing: easeInOutQuad"></a-sphere>
    
  </a-entity>
  
  <!-- AR Marker (hidden by default, appears when marker is detected) -->
  <a-marker type="barcode" value="5">
    <a-entity id="markerContent" position="0 0 0" scale="1 1 1">
      <!-- Content appears here when marker is detected -->
    </a-entity>
  </a-marker>
  
</a-scene>

<script>
  const days = [
    {
      title: "DAY 1 - MONDAY",
      date: "10 February 2026",
      lines: [
        "üèè Cricket ‚Ä¢ üèê Volleyball ‚Ä¢ ü§º Kabaddi",
        "‚ôüÔ∏è Chess Competition",
        "üéØ Carrom ‚Ä¢ Ludo ‚Ä¢ Lagori",
        ""
      ]
    },
    {
      title: "DAY 2 - TUESDAY",
      date: "11 February 2026",
      lines: [
        "‚ö° Sports Continuation ‚ö°",
        "üî• Semi-Final Matches üî•",
        "Intense Competition Begins",
        ""
      ]
    },
    {
      title: "DAY 3 - WEDNESDAY",
      date: "12 February 2026",
      lines: [
        "üèÜ Final Matches üèÜ",
        "The Ultimate Showdown",
        "Champions Emerge",
        ""
      ]
    },
    {
      title: "DAY 4 - THURSDAY",
      date: "13 February 2026",
      lines: [
        "üíÉ Bollywood & Traditional Day",
        "üçî Food Carnival",
        "üó∫Ô∏è Treasure Hunt Adventure",
        ""
      ]
    },
    {
      title: "DAY 5 - FRIDAY",
      date: "14 February 2026",
      lines: [
        "‚ú® Grand Finale ‚ú®",
        "üíÉ Dance ‚Ä¢ üé§ Singing ‚Ä¢ üé≠ Drama",
        "üëó Fashion Show & Awards üèÜ",
        ""
      ]
    }
  ];
  
  let currentDay = 0;
  let currentZoom = 60; // Camera FOV (field of view) - smaller = zoom in
  const ZOOM_MIN = 20; // Maximum zoom in
  const ZOOM_MAX = 80; // Maximum zoom out
  const ZOOM_DEFAULT = 60;
  
  // DOM Elements
  const dayTitle = document.getElementById("dayTitle");
  const dayDate = document.getElementById("dayDate");
  const line1 = document.getElementById("line1");
  const line2 = document.getElementById("line2");
  const line3 = document.getElementById("line3");
  const line4 = document.getElementById("line4");
  const dayLabel = document.getElementById("dayLabel");
  const dayIndicator = document.getElementById("dayIndicator");
  const loading = document.getElementById("loading");
  const compatibilityMessage = document.getElementById("compatibilityMessage");
  const compatibilityText = document.getElementById("compatibilityText");
  
  // Device detection
  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
  const isAndroid = /Android/i.test(navigator.userAgent);
  
  // Check compatibility
  function checkCompatibility() {
    const hasWebGL = (() => {
      try {
        const canvas = document.createElement('canvas');
        return !!(window.WebGLRenderingContext && 
          (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));
      } catch (e) {
        return false;
      }
    })();
    
    const hasGetUserMedia = !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
    
    if (!hasWebGL) {
      showCompatibilityMessage("Your device doesn't support WebGL, which is required for AR. Try updating your browser or using a different device.");
      return false;
    }
    
    if (!hasGetUserMedia) {
      showCompatibilityMessage("Your browser doesn't support camera access. Please use a modern browser like Chrome, Firefox, or Safari.");
      return false;
    }
    
    if (isIOS) {
      compatibilityText.textContent = "On iOS, please allow camera permissions when prompted.";
    }
    
    return true;
  }
  
  function showCompatibilityMessage(message) {
    compatibilityText.textContent = message;
    compatibilityMessage.classList.add('show');
    loading.classList.add('hidden');
  }
  
  function retryAR() {
    compatibilityMessage.classList.remove('show');
    loading.classList.remove('hidden');
    initializeAR();
  }
  
  // Initialize AR
  function initializeAR() {
    if (!checkCompatibility()) {
      return;
    }
    
    const scene = document.querySelector('a-scene');
    
    if (scene) {
      scene.addEventListener('loaded', () => {
        console.log('AR Scene loaded successfully');
        
        // Set initial zoom
        updateZoom();
        
        // Hide loading screen after delay
        setTimeout(() => {
          loading.classList.add('hidden');
        }, 2000);
      });
      
      scene.addEventListener('arjs-nft-loaded', () => {
        console.log('AR marker system loaded');
      });
      
      scene.addEventListener('error', (e) => {
        console.error('AR Scene error:', e.detail);
        showCompatibilityMessage("Failed to initialize AR. Please ensure camera permissions are granted and try again.");
      });
    }
    
    // Request camera permissions
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(() => {
          console.log('Camera access granted');
        })
        .catch((err) => {
          console.error('Camera access denied:', err);
          showCompatibilityMessage("Camera access is required for AR. Please allow camera permissions and refresh the page.");
        });
    }
  }
  
  // Day management functions
  function updateDay() {
    const day = days[currentDay];
    
    dayTitle.setAttribute("value", day.title);
    dayDate.setAttribute("value", day.date);
    line1.setAttribute("value", day.lines[0] || "");
    line2.setAttribute("value", day.lines[1] || "");
    line3.setAttribute("value", day.lines[2] || "");
    line4.setAttribute("value", day.lines[3] || "");
    
    dayLabel.textContent = `DAY ${currentDay + 1}/5`;
    
    // Update indicator dots
    const dots = dayIndicator.querySelectorAll('.dot');
    dots.forEach((dot, index) => {
      dot.classList.toggle('active', index === currentDay);
    });
  }
  
  function nextDay() {
    currentDay = (currentDay + 1) % days.length;
    updateDay();
    playTransition();
  }
  
  function prevDay() {
    currentDay = (currentDay - 1 + days.length) % days.length;
    updateDay();
    playTransition();
  }
  
  function playTransition() {
    // Smooth animation for all content
    [dayTitle, dayDate, line1, line2, line3, line4].forEach((elem, index) => {
      setTimeout(() => {
        elem.setAttribute('animation', 'property: scale; from: 0.8 0.8 0.8; to: 1.0 1.0 1.0; dur: 400; easing: easeOutBack');
        setTimeout(() => {
          elem.removeAttribute('animation');
        }, 400);
      }, index * 50);
    });
  }
  
  // Zoom functions using camera FOV
  function zoomIn() {
    if (currentZoom > ZOOM_MIN) {
      currentZoom -= 5;
      updateZoom();
    }
  }
  
  function zoomOut() {
    if (currentZoom < ZOOM_MAX) {
      currentZoom += 5;
      updateZoom();
    }
  }
  
  function resetZoom() {
    currentZoom = ZOOM_DEFAULT;
    updateZoom();
  }
  
  function updateZoom() {
    const camera = document.getElementById('arCamera');
    if (camera) {
      camera.setAttribute('fov', currentZoom);
      
      // Also adjust content scale for better effect
      const content = document.getElementById('arContent');
      if (content) {
        const scale = 1 + (ZOOM_DEFAULT - currentZoom) * 0.01;
        content.setAttribute('scale', `${scale} ${scale} ${scale}`);
      }
    }
  }
  
  // Initialize
  updateDay();
  
  // Start AR initialization
  window.addEventListener('load', () => {
    setTimeout(() => {
      initializeAR();
    }, 500);
  });
  
  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') prevDay();
    if (e.key === 'ArrowRight') nextDay();
    if (e.key === 'ArrowUp' || e.key === '+' || e.key === '=') zoomIn();
    if (e.key === 'ArrowDown' || e.key === '-' || e.key === '_') zoomOut();
    if (e.key === '0' || e.key === 'r' || e.key === 'R') resetZoom();
  });
  
  // Touch swipe support
  let touchStartX = 0;
  let touchEndX = 0;
  
  document.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
  }, { passive: true });
  
  document.addEventListener('touchend', e => {
    touchEndX = e.changedTouches
